Index: console/Makefile.am
===================================================================
RCS file: /sources/linphone/linphone/console/Makefile.am,v
retrieving revision 1.45
diff -u -r1.45 Makefile.am
--- console/Makefile.am	18 Oct 2006 13:41:21 -0000	1.45
+++ console/Makefile.am	22 Nov 2006 04:02:08 -0000
@@ -6,7 +6,7 @@
 	-I$(top_srcdir)/oRTP/include \
 	-I$(top_srcdir)/exosip \
 	-I$(top_srcdir)/mediastreamer2/include \
-	-I$(osip_prefix)/include 
+	-I$(osip_prefix)/include/osip2-2.2.2
 
 
 
Index: coreapi/Makefile.am
===================================================================
RCS file: /sources/linphone/linphone/coreapi/Makefile.am,v
retrieving revision 1.38
diff -u -r1.38 Makefile.am
--- coreapi/Makefile.am	21 Jul 2006 14:35:35 -0000	1.38
+++ coreapi/Makefile.am	22 Nov 2006 04:02:08 -0000
@@ -10,7 +10,7 @@
 	-I$(top_srcdir)/exosip\
 	-I$(top_srcdir)/oRTP/include \
 	-I$(top_srcdir)/mediastreamer2/include \
-	-I$(osip_prefix)/include/ 
+	-I$(osip_prefix)/include/osip2-2.2.2
 
 
 lib_LTLIBRARIES=liblinphone.la
Index: exosip/Makefile.am
===================================================================
RCS file: /sources/linphone/linphone/exosip/Makefile.am,v
retrieving revision 1.3
diff -u -r1.3 Makefile.am
--- exosip/Makefile.am	15 Feb 2005 16:12:13 -0000	1.3
+++ exosip/Makefile.am	22 Nov 2006 04:02:09 -0000
@@ -1,7 +1,7 @@
 noinst_LTLIBRARIES = libeXosip.la
 
 
-AM_CFLAGS = $(EXOSIP_CFLAGS)
+AM_CFLAGS = $(EXOSIP_CFLAGS) $(OSIP_CFLAGS)
 
 libeXosip_la_SOURCES =       eXosip.c  \
 jrequest.c jresponse.c    jcallback.c  jdialog.c   udp.c  \
Index: gnome/Makefile.am
===================================================================
RCS file: /sources/linphone/linphone/gnome/Makefile.am,v
retrieving revision 1.33
diff -u -r1.33 Makefile.am
--- gnome/Makefile.am	25 Aug 2006 14:15:17 -0000	1.33
+++ gnome/Makefile.am	22 Nov 2006 04:02:09 -0000
@@ -20,7 +20,7 @@
 	-I$(top_srcdir)/oRTP/include \
 	-I$(top_srcdir)/coreapi \
 	-I$(top_srcdir)/mediastreamer2/include \
-	-I$(osip_prefix)/include
+	-I$(osip_prefix)/include/osip2-2.2.2
 
 
 
Index: m4/osip.m4
===================================================================
RCS file: /sources/linphone/linphone/m4/osip.m4,v
retrieving revision 1.2
diff -u -r1.2 osip.m4
--- m4/osip.m4	22 Feb 2005 17:31:03 -0000	1.2
+++ m4/osip.m4	22 Nov 2006 04:02:09 -0000
@@ -6,7 +6,7 @@
 AC_SUBST(osip_prefix)
 
 
-OSIP_CFLAGS="-I$osip_prefix/include"
+OSIP_CFLAGS="-I$osip_prefix/include/osip2-2.2.2"
 OSIP_LIBS="-L$osip_prefix/lib"
 
 dnl check osip2 headers
@@ -20,11 +20,11 @@
 LDFLAGS=$OSIP_LIBS
 dnl AC_CHECK_LIB adds osipparser2 to LIBS, I don't want that !
 LIBS_save=$LIBS
-AC_CHECK_LIB(osipparser2,osip_message_init, , AC_MSG_ERROR([Could not find osip2 libraries !]))
+AC_CHECK_LIB(osipparser2-2.2.2,osip_message_init, , AC_MSG_ERROR([Could not find osip2 libraries !]))
 LDFLAGS=$LDFLAGS_save
 LIBS=$LIBS_save
 
-OSIP_LIBS="$OSIP_LIBS -losipparser2 -losip2"
+OSIP_LIBS="$OSIP_LIBS -losipparser2-2.2.2 -losip2-2.2.2"
 
 AC_SUBST(OSIP_CFLAGS)
 AC_SUBST(OSIP_LIBS)
